"use strict";Vue.component("vform",Vue.extend({props:{action:{type:String,"default":""},method:{type:String,"default":"POST"}},data:function(){return{request:{},isLoading:!1,response:{}}},computed:{hasMessage:function(){return void 0!=this.response.message},hasError:function(){return void 0!=this.response.error&&this.response.error}},methods:{submit:function(){this.$set("isLoading",!0),this.$http({url:this.action,method:this.method,params:this.request}).then(this.onSubmit,this.onError)},onSubmit:function(a){return this.$set("response",a.data),void 0!=a.data.redirect?window.location=a.data.redirect:void this.onComplete()},onComplete:function(){this.$set("isLoading",!1)},onError:function(a){console.log(a),this.onComplete()}},components:{"input-handler":Vue.extend({template:'<div :class="[class,errorCss]"><slot></slot><div class="errors"><ul><li v-for="error in inputErrors" track-by="$index">{{error}}</li></ul></div></div>',props:{listen:{type:String,"default":""},"class":{type:String,"default":""},classError:{type:String,"default":""},response:{type:Object,"default":function(){return{}}}},computed:{inputErrors:function(){var a=[];return void 0!=this.response.errors&&void 0!=this.response.errors[this.listen]&&(a=this.response.errors[this.listen]),a},hasErrors:function(){return this.inputErrors.length>0},errorCss:function(){var a={};return a[this.classError]=this.hasErrors,a}}}),results:Vue.extend({props:{model:{type:[Array,Object,String],"default":function(){return[]}},request:{type:Object,"default":function(){return{}}},fetchOnready:{type:[String,Boolean],"default":!1},clearOnFetch:{type:[String,Boolean],"default":!0}},data:function(){return{buffer:[]}},computed:{records:function(){if(!this.$parent.hasMessage&&Array.isArray(this.model))if(this.clearOnFetch)this.$set("buffer",this.model);else for(var a in this.model)void 0!==this.model[a]&&null!==this.model[a]&&this.buffer.push(this.model[a]);return this.buffer},hasRecords:function(){return this.records.length>0}},ready:function(){this.fetchOnready&&this.$parent.submit()}})}}));